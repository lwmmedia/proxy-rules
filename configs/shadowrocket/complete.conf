[General]
bypass-system = true
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local
tun-excluded-routes = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32
dns-server = 223.5.5.5,114.114.114.114,system
ipv6 = false
update-url = https://raw.githubusercontent.com/lwmmedia/proxy-rules/main/configs/shadowrocket/complete.conf

[Rule]
# Block QUIC
PROTOCOL,UDP,REJECT

# Security
DOMAIN-KEYWORD,malware,REJECT
DOMAIN-KEYWORD,virus,REJECT
DOMAIN-KEYWORD,trojan,REJECT
DOMAIN-KEYWORD,phishing,REJECT
DOMAIN-KEYWORD,analytics,REJECT
DOMAIN-KEYWORD,doubleclick,REJECT

# Streaming services
RULE-SET,https://raw.githubusercontent.com/lwmmedia/proxy-rules/main/rules/streaming/youtube.list,PROXY
RULE-SET,https://raw.githubusercontent.com/lwmmedia/proxy-rules/main/rules/streaming/netflix.list,PROXY
DOMAIN-KEYWORD,youtube,PROXY
DOMAIN-KEYWORD,googlevideo,PROXY
DOMAIN-KEYWORD,netflix,PROXY

# Social media
RULE-SET,https://raw.githubusercontent.com/lwmmedia/proxy-rules/main/rules/social/telegram.list,PROXY
RULE-SET,https://raw.githubusercontent.com/lwmmedia/proxy-rules/main/rules/social/discord.list,PROXY
RULE-SET,https://raw.githubusercontent.com/lwmmedia/proxy-rules/main/rules/social/twitter.list,PROXY
IP-CIDR,91.108.4.0/22,PROXY,no-resolve
IP-CIDR,91.108.8.0/22,PROXY,no-resolve
IP-CIDR,91.108.12.0/22,PROXY,no-resolve
IP-CIDR,91.108.16.0/22,PROXY,no-resolve
IP-CIDR,91.108.56.0/22,PROXY,no-resolve
IP-CIDR,149.154.160.0/20,PROXY,no-resolve

# Global services
RULE-SET,https://raw.githubusercontent.com/lwmmedia/proxy-rules/main/rules/global/google.list,PROXY
RULE-SET,https://raw.githubusercontent.com/lwmmedia/proxy-rules/main/rules/global/microsoft.list,PROXY

# Apple optimization
DOMAIN-SUFFIX,push.apple.com,DIRECT
DOMAIN-SUFFIX,lcdn-locator.apple.com,DIRECT
DOMAIN-SUFFIX,lcdn-registration.apple.com,DIRECT
DOMAIN-SUFFIX,iphone-ld.apple.com,DIRECT
DOMAIN-SUFFIX,mzstatic.com,DIRECT
RULE-SET,https://raw.githubusercontent.com/lwmmedia/proxy-rules/main/rules/global/apple.list,DIRECT

# Local network
DOMAIN-SUFFIX,local,DIRECT
IP-CIDR,192.168.0.0/16,DIRECT
IP-CIDR,10.0.0.0/8,DIRECT
IP-CIDR,172.16.0.0/12,DIRECT
IP-CIDR,127.0.0.0/8,DIRECT

# China direct
GEOIP,CN,DIRECT

# Final
FINAL,PROXY

[URL Rewrite]
^http://(www.)?google.com https://www.google.com 302
^http://(www.)?youtube.com https://www.youtube.com 302
