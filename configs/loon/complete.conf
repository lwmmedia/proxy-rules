# Loon Complete Configuration
# Proxy Rules Collection by lwmmedia
# Last Updated: November 10, 2025
# Repository: https://github.com/lwmmedia/proxy-rules

[General]
# IPv6 Support
ipv6 = false

# Skip Proxy for Local Networks
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, captive.apple.com

# DNS Servers - Optimized for France/Europe
dns-server = 1.1.1.1, 8.8.8.8, 9.9.9.9, 1.0.0.1

# Allow WiFi Access
allow-wifi-access = false
wifi-access-http-port = 7222
wifi-access-socks5-port = 7221

# Test URL
internet-test-url = http://www.gstatic.com/generate_204
proxy-test-url = http://www.google.com/generate_204

# Resource Parser
resource-parser = https://raw.githubusercontent.com/Peng-YM/Sub-Store/master/backend/dist/sub-store-parser.loon.min.js

# GeoIP Database
geoip-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb

[Proxy]
# Add your proxy servers here
# Example:
# US-West = Shadowsocks, server.example.com, 443, encrypt-method=aes-256-gcm, password=yourpassword
# US-East = Trojan, server2.example.com, 443, password=yourpassword, sni=server2.example.com

[Proxy Group]
# Auto Selection - Fastest proxy based on latency
Auto = url-test,url=http://www.google.com/generate_204,interval=300,tolerance=50,timeout=3

# Streaming Services - Optimized for video
YouTube = select,Auto,DIRECT,interval=300,timeout=3
Netflix = select,Auto,DIRECT,interval=300,timeout=3

# Social Media - Optimized for messaging
Telegram = select,Auto,DIRECT,interval=300,timeout=3
Discord = select,Auto,DIRECT,interval=300,timeout=3
Twitter = select,Auto,DIRECT,interval=300,timeout=3

# Global Tech Services
Google = select,Auto,DIRECT,interval=300,timeout=3
Microsoft = select,Auto,DIRECT,interval=300,timeout=3

# Fallback for other traffic
Global = select,DIRECT,Auto,interval=300,timeout=3

[Remote Rule]
# Streaming Services
https://raw.githubusercontent.com/lwmmedia/proxy-rules/main/rules/streaming/youtube.list,policy=YouTube,tag=YouTube,enabled=true
https://raw.githubusercontent.com/lwmmedia/proxy-rules/main/rules/streaming/netflix.list,policy=Netflix,tag=Netflix,enabled=true

# Social Media Platforms
https://raw.githubusercontent.com/lwmmedia/proxy-rules/main/rules/social/telegram.list,policy=Telegram,tag=Telegram,enabled=true
https://raw.githubusercontent.com/lwmmedia/proxy-rules/main/rules/social/discord.list,policy=Discord,tag=Discord,enabled=true
https://raw.githubusercontent.com/lwmmedia/proxy-rules/main/rules/social/twitter.list,policy=Twitter,tag=Twitter,enabled=true

# Global Tech Services
https://raw.githubusercontent.com/lwmmedia/proxy-rules/main/rules/global/google.list,policy=Google,tag=Google,enabled=true
https://raw.githubusercontent.com/lwmmedia/proxy-rules/main/rules/global/microsoft.list,policy=Microsoft,tag=Microsoft,enabled=true

[Rule]
# Block Ads and Trackers
DOMAIN-SUFFIX,googlesyndication.com,REJECT
DOMAIN-SUFFIX,googleadservices.com,REJECT
DOMAIN-KEYWORD,analytics,REJECT
DOMAIN-KEYWORD,adservice,REJECT
DOMAIN-KEYWORD,doubleclick,REJECT

# Apple Services - Direct for optimal CDN performance in France/Europe
DOMAIN-SUFFIX,push.apple.com,DIRECT
DOMAIN-SUFFIX,lcdn-locator.apple.com,DIRECT
DOMAIN-SUFFIX,lcdn-registration.apple.com,DIRECT
DOMAIN-SUFFIX,iphone-ld.apple.com,DIRECT
DOMAIN-SUFFIX,mzstatic.com,DIRECT
RULE-SET,https://raw.githubusercontent.com/lwmmedia/proxy-rules/main/rules/global/apple.list,DIRECT

# Local Network
GEOIP,FR,DIRECT

# Final Rule - Default to direct for France/Europe
FINAL,DIRECT

[URL Rewrite]
# URL rewriting rules (optional)
# ^https?://(www.)?example\.com example.com 302

[Script]
# Add Loon scripts here (optional)

[MITM]
# Man-in-the-middle settings (use with caution)
# Only enable if you need to decrypt HTTPS traffic
skip-server-cert-verify = false
# hostname = *.example.com
